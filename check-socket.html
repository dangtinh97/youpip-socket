<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<p id="id-socket"></p>
<button type="button" id="push">
    PUSH
</button>
<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js" integrity="sha512-xbQU0+iHqhVt7VIXi6vBJKPh3IQBF5B84sSHdjKiSccyX/1ZI7Vnkt2/8y8uruj63/DVmCxfUNohPNruthTEQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    document.addEventListener("DOMContentLoaded",function (){
        var URL = 'http://54.254.11.130:3003';
        URL = 'http://localhost:3003';
        let socket = io(URL,{
            "auth":{
                'token':"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vNTQuMjU0LjExLjEzMC9hcGkvbG9naW4iLCJpYXQiOjE2ODA0MDM3NjEsImV4cCI6MTY5NTk1NTc2MSwibmJmIjoxNjgwNDAzNzYxLCJqdGkiOiJBQzJjb1ROZ3dLWWdqbTJTIiwic3ViIjoiNjQxOWU2MTllMGIxMGUwNTNlMDkyNDg0IiwicHJ2IjoiMjNiZDVjODk0OWY2MDBhZGIzOWU3MDFjNDAwODcyZGI3YTU5NzZmNyJ9.3rwxwOQpIMyPxoi9uvuwy6FZDlGaox6zF47ZnYFw1jc"
            },
            "query": {
                "EIO": "4",
                "transport": "polling",
            },
        })
        socket.on("disconnect",()=>{

        })

        socket.on("connect",()=>{
            socket.on("disconnect", () => {
                console.log("disconnect")
            })

            socket.on("PUSH_ROOM",function (){
                console.log("HELLO")
            })

            socket.on("PING",function (){
                console.log("PING")
            })
            console.log(socket)

            $('#id-socket').html(`id : ${socket.id}`)

            socket.on('PUSH_ROOM',function (){
                console.log("roomA")
            })

        })
        $("#push").on('click',function (){
            alert("click")
            socket.emit("PUSH_ROOM",{
                room:"roomA"
            })
        })
    })
</script>
</body>
</html>
